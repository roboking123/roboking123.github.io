好的，這是一份根據您的完整功能需求文件，直接撰寫的HTML結構骨架。

這份文件是一個單一的HTML檔案，它包含了所有頁面和功能的結構藍圖。您可以將此檔案直接在瀏覽器中打開，以檢視網站的靜態佈局。實際的功能（如資料儲存、AI互動、雲端同步）將需要用JavaScript來實現，我在`<script>`標籤中用註解詳細說明了每一部分需要實現的邏輯，可供後續開發參考。

***

### 說明
* **純前端設計**：整個網站被設計成一個單頁應用程式（SPA），所有內容都在一個HTML檔案中，透過顯示/隱藏不同的`<div>`區塊來模擬頁面切換，完全符合「不要彈出視窗」和「純前端解決方案」的要求。
* **響應式佈局**：基礎CSS使用了Flexbox佈局，確保在電腦、平板和手機上都有良好的瀏覽體驗。
* **可擴展性**：所有動態列表（如角色列表、AI素材選擇器）都有一個清晰的容器`<div>`和一個註解起來的「模板」，方便後續用JavaScript動態生成內容。
* **可配置性**：在「設定」頁面中，我為您要求的可修改項目（如預設標籤、AI模板）建立了專門的輸入框，符合「不需要我進入程式碼」修改的需求。

***

### `index.html` (小說素材庫 - 完整結構)

```html
<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>小說素材庫</title>
    <style>
        /* --- 全局樣式與現代化界面 --- */
        :root {
            --primary-bg: #1a1a1d;
            --secondary-bg: #2a2a2e;
            --card-bg: #3a3a3e;
            --text-color: #f0f0f0;
            --primary-accent: #4a90e2;
            --secondary-accent: #7b4397;
            --danger-color: #c94c4c;
            --success-color: #4caf50;
            --font-family: 'Segoe UI', 'Microsoft JhengHei', sans-serif;
        }
        body {
            font-family: var(--font-family);
            margin: 0;
            background-color: var(--primary-bg);
            color: var(--text-color);
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
        }
        * { box-sizing: border-box; }

        /* --- 登入頁面 --- */
        #login-page {
            text-align: center;
            background-color: var(--secondary-bg);
            padding: 40px;
            border-radius: 8px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.5);
        }
        #login-page input[type="password"] {
            padding: 10px;
            width: 250px;
            margin-top: 10px;
            border: 1px solid var(--primary-accent);
            border-radius: 4px;
            background-color: var(--card-bg);
            color: var(--text-color);
        }
        #login-page button {
            padding: 10px 20px;
            margin-top: 20px;
            background-color: var(--primary-accent);
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }
        #login-page .remember-me { margin-top: 15px; }

        /* --- 主應用程式容器 (響應式設計) --- */
        #app-container {
            display: none; /* 預設隱藏，登入後顯示 */
            width: 100%;
            height: 100vh;
            display: flex;
            flex-direction: row;
        }

        /* --- 導航欄 --- */
        nav {
            width: 220px;
            background-color: var(--secondary-bg);
            padding: 20px 0;
            flex-shrink: 0;
            display: flex;
            flex-direction: column;
        }
        nav h1 { font-size: 1.5em; text-align: center; margin-bottom: 30px; }
        nav ul { list-style: none; padding: 0; margin: 0; }
        nav ul li a {
            display: block;
            padding: 15px 25px;
            color: var(--text-color);
            text-decoration: none;
            transition: background-color 0.3s;
        }
        nav ul li a.active, nav ul li a:hover {
            background-color: var(--primary-accent);
        }
        .nav-footer { margin-top: auto; padding: 20px; text-align: center; font-size: 0.8em;}


        /* --- 主內容區域 --- */
        main {
            flex-grow: 1;
            padding: 30px;
            overflow-y: auto;
            height: 100vh;
        }
        .page {
            display: none; /* 所有頁面預設隱藏 */
        }
        .page.active {
            display: block; /* 當前頁面顯示 */
        }
        
        /* --- 內容通用元件 --- */
        h2 { border-bottom: 2px solid var(--primary-accent); padding-bottom: 10px; }
        .toolbar { display: flex; gap: 10px; margin-bottom: 20px; flex-wrap: wrap; }
        .toolbar input, .toolbar select, .toolbar button {
            padding: 8px 12px;
            border-radius: 4px;
            border: 1px solid var(--primary-accent);
            background-color: var(--card-bg);
            color: var(--text-color);
        }
        .toolbar button { cursor: pointer; background-color: var(--secondary-accent); border-color: var(--secondary-accent);}
        .toolbar .danger-button { background-color: var(--danger-color); border-color: var(--danger-color);}
        
        /* 列表樣式 */
        .item-list .item {
            background-color: var(--card-bg);
            padding: 15px;
            border-radius: 5px;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 15px;
            cursor: pointer;
        }
        .item-list .item:hover { background-color: #4a4a50; }
        .item-list .item-content { flex-grow: 1; }
        .item-list .item-title { font-weight: bold; }
        .item-list .item-summary { font-size: 0.9em; opacity: 0.8; }

        /* 標籤樣式 */
        .tag {
            display: inline-block;
            padding: 3px 8px;
            border-radius: 10px;
            font-size: 0.8em;
            margin-right: 5px;
        }

        /* 編輯頁面樣式 */
        .edit-form label { display: block; margin-top: 15px; margin-bottom: 5px; font-weight: bold; }
        .edit-form input[type="text"], .edit-form select {
            width: 100%;
            padding: 10px;
            border-radius: 4px;
            border: 1px solid var(--primary-accent);
            background-color: var(--card-bg);
            color: var(--text-color);
        }
        /* 大型輸入框 */
        .edit-form textarea {
            width: 100%;
            min-height: 150px;
            padding: 10px;
            border-radius: 4px;
            border: 1px solid var(--primary-accent);
            background-color: var(--card-bg);
            color: var(--text-color);
            resize: vertical;
        }
        .edit-form .form-actions { margin-top: 20px; }
        #autosave-status {
            margin-left: 15px;
            font-style: italic;
            opacity: 0.7;
        }

        /* AI 創作助手頁面佈局 */
        #ai-assistant-page .container {
            display: flex;
            gap: 20px;
            height: calc(100vh - 150px);
        }
        .material-selector, .prompt-history {
            width: 25%;
            background-color: var(--secondary-bg);
            padding: 15px;
            border-radius: 8px;
            overflow-y: auto;
        }
        .prompt-editor {
            width: 50%;
            display: flex;
            flex-direction: column;
        }
        /* AI大型自訂提示詞輸入框 */
        #ai-prompt-input {
            flex-grow: 1;
            width: 100%;
            padding: 15px;
            font-size: 1.1em;
            border-radius: 4px;
            border: 1px solid var(--primary-accent);
            background-color: var(--card-bg);
            color: var(--text-color);
            resize: none; /* JS會處理高度變化 */
        }

        /* 秘密設定特殊警告 */
        .secret-warning {
            background-color: var(--danger-color);
            color: white;
            padding: 10px;
            border-radius: 5px;
            font-weight: bold;
        }

    </style>
</head>
<body>

    <div id="login-page">
        <h1>小說素材庫</h1>
        <p>請輸入存取密碼</p>
        <input type="password" id="password-input" value="1234">
        <div class="remember-me">
            <input type="checkbox" id="remember-me-checkbox">
            <label for="remember-me-checkbox">記住登入狀態</label>
        </div>
        <button id="login-button">進入</button>
    </div>

    <div id="app-container">

        <nav>
            <h1>素材庫</h1>
            <ul>
                <li><a href="#dashboard-page" class="nav-link active">主控台</a></li>
                <li><a href="#characters-page" class="nav-link">👤 角色設定</a></li>
                <li><a href="#backgrounds-page" class="nav-link">🌍 故事背景</a></li>
                <li><a href="#secrets-page" class="nav-link">🔐 秘密設定</a></li>
                <li><a href="#novels-page" class="nav-link">📖 已生成小說</a></li>
                <li><a href="#ai-assistant-page" class="nav-link">🤖 AI創作助手</a></li>
            </ul>
            <div class="nav-footer">
                <a href="#settings-page" class="nav-link">⚙️ 設定/備份</a>
            </div>
        </nav>

        <main>
            <div id="dashboard-page" class="page active">
                <h2>主控台總覽</h2>
                <section>
                    <h3>資料統計</h3>
                    <p>角色總數：<span id="stats-characters">0</span></p>
                    <p>背景總數：<span id="stats-backgrounds">0</span></p>
                    <p>秘密總數：<span id="stats-secrets">0</span></p>
                    <p>小說總數：<span id="stats-novels">0</span></p>
                    <p>總字數統計：<span id="stats-total-words">0</span> 字</p>
                </section>
                <section>
                    <h3>最近活動</h3>
                    <ul id="recent-activity-list">
                        <li>剛剛修改了 角色「艾莉亞」</li>
                        <li>3小時前 新增了 背景「風語之森」</li>
                    </ul>
                </section>
            </div>

            <div id="characters-page" class="page">
                <h2>👤 角色設定</h2>
                <div class="toolbar">
                    <button id="add-character-btn">＋ 新增角色</button>
                    <input type="search" id="character-search" placeholder="全文搜尋角色...">
                    <select id="character-tag-filter">
                        <option value="">所有標籤</option>
                        </select>
                    <button id="character-batch-delete" class="danger-button">批量刪除</button>
                    <button id="character-batch-tag">批量標籤</button>
                </div>
                <div id="character-list" class="item-list">
                    </div>
            </div>

            <div id="backgrounds-page" class="page">
                <h2>🌍 故事背景</h2>
                <div class="toolbar">
                    <button id="add-background-btn">＋ 新增背景</button>
                    <input type="search" id="background-search" placeholder="全文搜尋背景...">
                    <select id="background-tag-filter">
                         <option value="">所有標籤</option>
                    </select>
                    <button id="background-batch-delete" class="danger-button">批量刪除</button>
                    <button id="background-batch-tag">批量標籤</button>
                </div>
                <div id="background-list" class="item-list">
                    </div>
            </div>

            <div id="secrets-page" class="page">
                <h2>🔐 秘密設定</h2>
                <div class="toolbar">
                    <button id="add-secret-btn">＋ 新增秘密</button>
                    <input type="search" id="secret-search" placeholder="全文搜尋秘密...">
                    <select id="secret-tag-filter">
                        <option value="">所有標籤</option>
                    </select>
                    <button id="secret-batch-delete" class="danger-button">批量刪除</button>
                    <button id="secret-batch-tag">批量標籤</button>
                </div>
                <div id="secret-list" class="item-list">
                    </div>
            </div>

             <div id="novels-page" class="page">
                <h2>📖 已生成小說</h2>
                <div class="toolbar">
                    <input type="search" id="novel-search" placeholder="搜尋小說標題或內容...">
                    <select id="novel-sort">
                        <option value="date_desc">按時間排序 (新→舊)</option>
                        <option value="date_asc">按時間排序 (舊→新)</option>
                        <option value="title_asc">按標題排序 (A→Z)</option>
                    </select>
                </div>
                <div id="novel-list" class="item-list">
                    </div>
            </div>
            
            <div id="edit-page" class="page">
                <h2 id="edit-page-title">編輯項目</h2>
                <div id="edit-form-container">
                    <form id="edit-character-form" class="edit-form" style="display:none;">
                        <input type="hidden" id="char-id">
                        <label for="char-name">角色名稱 (必填)</label>
                        <input type="text" id="char-name" required>
                        <label for="char-age">年齡</label>
                        <input type="text" id="char-age">
                        <label for="char-appearance">外貌描述</label>
                        <textarea id="char-appearance" rows="5"></textarea>
                        <label for="char-race">種族</label>
                        <input type="text" id="char-race">
                        <label for="char-personality">性格特質</label>
                        <textarea id="char-personality" rows="4"></textarea>
                        <label for="char-story">背景故事</label>
                        <textarea id="char-story" rows="8"></textarea>
                        <label for="char-notes">額外備註</label>
                        <textarea id="char-notes" rows="3"></textarea>
                        <label for="char-tags">標籤 (以逗號分隔)</label>
                        <input type="text" id="char-tags" placeholder="主角, 反派, 重要...">
                    </form>
                    <form id="edit-background-form" class="edit-form" style="display:none;">
                        <input type="hidden" id="bg-id">
                        <label for="bg-name">場景名稱 (必填)</label>
                        <input type="text" id="bg-name" required>
                        <label for="bg-type">類型</label>
                        <select id="bg-type">
                            <option>地點</option>
                            <option>時代</option>
                            <option>世界觀</option>
                            <option>文化</option>
                            <option>其他</option>
                        </select>
                        <label for="bg-description">詳細描述</label>
                        <textarea id="bg-description" rows="8"></textarea>
                        <label for="bg-rules">規則/法則</label>
                        <textarea id="bg-rules" rows="5"></textarea>
                        <label for="bg-notes">備註</label>
                        <textarea id="bg-notes" rows="3"></textarea>
                        <label for="bg-tags">標籤 (以逗號分隔)</label>
                        <input type="text" id="bg-tags">
                    </form>
                    <form id="edit-secret-form" class="edit-form" style="display:none;">
                        <input type="hidden" id="secret-id">
                        <label for="secret-title">標題 (必填)</label>
                        <input type="text" id="secret-title" required>
                        <label for="secret-category">類別</label>
                        <select id="secret-category">
                            <option>劇情轉折</option>
                            <option>角色秘密</option>
                            <option>世界設定</option>
                            <option>伏筆</option>
                            <option>結局</option>
                            <option>秘密預設被誰知道</option>
                        </select>
                        <label for="secret-content">內容</label>
                        <textarea id="secret-content" rows="8"></textarea>
                        <label for="secret-importance">影響/重要性</label>
                        <textarea id="secret-importance" rows="4"></textarea>
                        <label>
                            <input type="checkbox" id="secret-spoiler"> 特殊警告顯示 (劇透提醒)
                        </label>
                    </form>
                </div>
                <div class="form-actions">
                    <button id="save-item-btn">儲存</button>
                    <button id="back-to-list-btn">返回列表</button>
                    <button id="delete-item-btn" class="danger-button">刪除此項目</button>
                    <span id="autosave-status"></span>
                </div>
            </div>

            <div id="view-page" class="page">
                 <h2 id="view-title"></h2>
                 <div id="view-content">
                    </div>
                 <div class="toolbar">
                    <button id="view-edit-btn">編輯</button>
                    <button id="view-back-btn">返回列表</button>
                 </div>
            </div>
            
            <div id="ai-assistant-page" class="page">
                <h2>🤖 AI創作助手</h2>
                <div class="container">
                    <div class="material-selector">
                        <h4>選擇素材加入提示詞</h4>
                        <div id="ai-material-selector-content">
                            <h5>👤 角色</h5>
                            <div id="ai-character-selector"></div>
                            <h5>🌍 背景</h5>
                            <div id="ai-background-selector"></div>
                            <h5>🔐 秘密</h5>
                            <div id="ai-secret-selector"></div>
                        </div>
                    </div>
                    <div class="prompt-editor">
                        <textarea id="ai-prompt-input" placeholder="在這裡輸入或使用右側模板生成你的AI提示詞..."></textarea>
                        <div class="toolbar" style="margin-top: 10px;">
                            <button id="send-to-perplexity-btn">一鍵發送到 Perplexity</button>
                            <button id="copy-prompt-btn">複製提示詞</button>
                            <button id="save-prompt-template-btn">儲存為常用</button>
                        </div>
                    </div>
                    <div class="prompt-history">
                        <h4>智慧模板</h4>
                        <button class="template-btn" data-template="story">創作完整/日常故事</button>
                        <button class="template-btn" data-template="dialogue">角色對話生成</button>
                        <button class="template-btn" data-template="scene">場景描述</button>
                        <button class="template-btn" data-template="dnd">DND/RPG角色模板</button>
                        
                        <h4 style="margin-top:20px;">常用提示詞</h4>
                        <ul id="saved-prompts-list"></ul>

                        <h4 style="margin-top:20px;">提示詞歷史</h4>
                        <ul id="prompt-history-list"></ul>
                    </div>
                </div>
            </div>
            
            <div id="settings-page" class="page">
                <h2>⚙️ 設定/備份</h2>
                <section>
                    <h3>基礎安全功能</h3>
                    <label for="setting-password">修改網站存取密碼</label>
                    <input type="password" id="setting-password" placeholder="輸入新密碼">
                    <button id="save-password-btn">儲存新密碼</button>
                </section>
                <section>
                    <h3>☁️ Google雲端備份整合</h3>
                    <div id="gdrive-status">狀態：未登入</div>
                    <button id="gdrive-login-btn">使用Google帳號登入並授權</button>
                    <button id="gdrive-backup-btn" disabled>立即手動備份</button>
                    <button id="gdrive-restore-btn" disabled>從雲端還原</button>
                    <h4>最近5個備份版本：</h4>
                    <ul id="gdrive-versions-list">
                        </ul>
                </section>
                <section>
                    <h3>匯入/匯出</h3>
                    <button id="export-json-btn">匯出為JSON格式</button>
                    <button id="export-markdown-btn">匯出為可讀格式(Markdown)</button>
                    <br><br>
                    <label for="import-json-file">從JSON檔案匯入：</label>
                    <input type="file" id="import-json-file" accept=".json">
                </section>
                <section>
                    <h3>自訂預設值與模板</h3>
                    <form id="custom-settings-form" class="edit-form">
                        <label for="setting-default-tags">預設標籤 (以逗號分隔)</label>
                        <input type="text" id="setting-default-tags" value="主角, 配角, 反派, 重要, 次要">
                        <label for="setting-dnd-template">DND/RPG角色模板</label>
                        <textarea id="setting-dnd-template" rows="10">請基於以下資訊，為我生成一個DND 5e或Pathfinder風格的角色背景故事：
- 姓名: {{角色名稱}}
- 種族: {{種族}}
- 職業: [請填寫]
- 陣營: [請填寫]
- 性格: {{性格特質}}
- 外觀: {{外貌描述}}
- 背景: {{背景故事}}
請將故事擴寫到約500字，並包含一個關鍵的轉折點。</textarea>
                        <button id="save-custom-settings-btn">儲存自訂設定</button>
                    </form>
                </section>
            </div>
        </main>
    </div>

<script>
// =================================================================
//                 小說素材庫 JAVASCRIPT 邏輯區 (待實現)
// =================================================================

document.addEventListener('DOMContentLoaded', () => {

    // --- 核心資料儲存 ---
    // 應用程式狀態，所有資料將儲存在此物件中
    // 實際應用中，此物件會在啟動時從 localStorage 或 Google Drive 載入
    const AppState = {
        password: '1234',
        rememberMe: false,
        settings: {
            defaultTags: ['主角', '配角', '反派', '重要', '次要'],
            dndTemplate: '...', // 預設模板內容
            // ...其他設定
        },
        data: {
            characters: [], // { id, name, age, ... }
            backgrounds: [], // { id, name, type, ... }
            secrets: [],     // { id, title, category, ... }
            novels: [],      // { id, title, prompt, content, ... }
        },
        ui: {
            currentPage: '#dashboard-page',
            editingItemId: null,
            editingItemType: null, // 'character', 'background', etc.
        }
    };

    // --- 1. 基礎安全與登入邏輯 ---
    function initializeLogin() {
        // 檢查 localStorage 中是否有記住的密碼或登入狀態
        // 如果有，直接顯示主應用程式
        // 否則，顯示登入頁面
        // login-button 的點擊事件：
        //   - 驗證密碼
        //   - 如果正確，隱藏 #login-page，顯示 #app-container
        //   - 處理「記住我」選項，將狀態存入 localStorage
    }

    // --- 2. 導航與頁面切換邏輯 ---
    function setupNavigation() {
        // 為所有 .nav-link 添加點擊事件
        // 點擊時：
        //   - 移除所有 .nav-link 的 'active' class
        //   - 為被點擊的連結添加 'active' class
        //   - 隱藏所有 .page 元素
        //   - 根據連結的 href (如 '#characters-page') 顯示對應的 .page 元素
        //   - 更新 AppState.ui.currentPage
    }

    // --- 3. 資料管理與渲染 ---
    // (需要為 character, background, secret 分別或統一建立渲染函數)
    function renderCharacterList() {
        // 清空 #character-list
        // 遍歷 AppState.data.characters
        // 根據搜尋和標籤篩選條件過濾
        // 為每個角色創建HTML元素 (可使用模板字符串)，並添加到 #character-list
        // 為每個項目添加點擊事件，以跳轉到檢視頁面
    }
    // ...類似的 renderBackgroundList(), renderSecretList() ...

    // --- 4. 新增/編輯/檢視邏輯 ---
    function openEditPage(type, id = null) {
        // type: 'character', 'background', etc.
        // id: 如果是編輯，則傳入項目id；如果是新增，則為null
        // 邏輯:
        //   - 顯示 #edit-page
        //   - 隱藏所有 edit-form，只顯示對應 type 的表單 (如 #edit-character-form)
        //   - 如果是編輯 (id存在)，則從 AppState 讀取資料並填充表單
        //   - 如果是新增，則清空表單
        //   - 更新 AppState.ui.editing... 狀態
    }

    function openViewPage(type, id) {
        // 邏輯:
        //   - 顯示 #view-page
        //   - 從 AppState 讀取資料
        //   - 將資料格式化為HTML並填入 #view-content
        //   - 特別處理秘密設定的劇透警告
    }
    
    function saveItem() {
        // 根據 AppState.ui.editingItemType 讀取對應表單的資料
        // 驗證必填項
        // 如果是新增，生成新id，推入 AppState.data
        // 如果是編輯，更新 AppState.data 中對應的項目
        // 觸發自動儲存到 localStorage/Google Drive
        // 返回列表頁面並重新渲染
    }

    // --- 5. AI 創作助手邏輯 ---
    function initializeAIAssistant() {
        // 渲染素材選擇器列表
        // 處理模板按鈕的點擊事件，將模板文字填入 #ai-prompt-input
        // 處理 #ai-prompt-input 的輸入事件，使其高度自動增長
        //   - textarea.style.height = 'auto';
        //   - textarea.style.height = textarea.scrollHeight + 'px';
        // 處理「一鍵發送到Perplexity」：
        //   - const url = `https://www.perplexity.ai/search?q=${encodeURIComponent(promptText)}`;
        //   - window.open(url, '_blank');
        // 處理提示詞的複製、儲存、歷史記錄功能
    }

    // --- 6. Google Drive 整合邏輯 (API調用) ---
    // 需要載入 Google API client library
    function handleGoogleAuth() {
        // 使用 gapi (Google API) 進行 OAuth 2.0 登入
        // 成功後更新UI狀態
    }
    function backupToDrive() {
        // 將 AppState 物件轉換為 JSON 字符串
        // 使用 Google Drive API 上傳檔案
        // 管理版本，只保留最近5個
    }
    function restoreFromDrive() {
        // 使用 Google Drive API 獲取檔案列表
        // 讓用戶選擇版本
        // 下載檔案內容，解析JSON，並覆蓋 AppState
        // 重新渲染整個應用程式
    }
    
    // --- 7. 設定頁面邏輯 ---
    function loadSettings() {
        // 將 AppState.settings 的值填入設定頁面的各個輸入框中
    }
    function saveSettings() {
        // 讀取設定頁面輸入框的值，更新到 AppState.settings
        // 觸發儲存
    }

    // --- 應用程式初始化 ---
    function main() {
        console.log("應用程式啟動");
        // 1. 處理登入
        initializeLogin(); 

        // 假設已登入，初始化各個模組
        // 2. 設定導航
        setupNavigation();
        
        // 3. 渲染初始頁面 (主控台)
        // updateDashboardStats();
        // renderRecentActivity();

        // 4. 為所有按鈕和互動元素綁定事件
        // e.g., document.getElementById('add-character-btn').addEventListener('click', () => openEditPage('character'));
        // e.g., document.getElementById('save-item-btn').addEventListener('click', saveItem);
        // ...等等
    }

    main();
});
</script>

</body>
</html>

```
